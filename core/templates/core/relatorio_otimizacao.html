{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Ordem de Serviço - Otimização</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none; }
        }
        body { font-family: 'Courier New', Courier, monospace; background: white; color: black; }
    </style>
</head>
<body class="p-8 max-w-[210mm] mx-auto">

    <div class="border-b-2 border-black pb-4 mb-6 flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-bold uppercase">Ordem de Movimentação</h1>
            <p class="text-sm">Otimização de Espaço / Consolidação</p>
        </div>
        <div class="text-right">
            <p class="text-xs font-bold">DATA BASE: {{ data_ref|date:"d/m/Y" }}</p>
            <p class="text-xs">EMISSÃO: {% now "d/m/Y H:i" %}</p>
        </div>
    </div>

    <div class="flex gap-8 mb-6 border border-black p-4 bg-gray-50">
        <div>
            <span class="block text-xs uppercase font-bold">Total de Movimentos</span>
            <span class="text-xl">{{ qtd }}</span>
        </div>
        <div>
            <span class="block text-xs uppercase font-bold">Ruas Liberadas (Estimado)</span>
            <span class="text-xl">{{ qtd }}</span>
        </div>
    </div>

    <table class="w-full text-xs text-left border-collapse border border-black mb-8">
        <thead class="bg-gray-200 uppercase font-bold border-b border-black">
            <tr>
                <th class="border-r border-black p-2 w-10">#</th>
                <th class="border-r border-black p-2">Origem</th>
                <th class="border-r border-black p-2">Destino</th>
                <th class="border-r border-black p-2">Produto / SKU</th>
                <th class="border-r border-black p-2 text-center">Qtd (Pal)</th>
                <th class="border-r border-black p-2 text-center">Validade</th>
                <th class="p-2 text-center w-24">Check</th>
            </tr>
        </thead>
        <tbody>
            {% for item in sugestoes %}
            <tr class="border-b border-gray-300">
                <td class="border-r border-black p-2">{{ forloop.counter }}</td>
                <td class="border-r border-black p-2 font-bold">{{ item.origem_rua }}</td>
                <td class="border-r border-black p-2 font-bold">{{ item.destino_rua }}</td>
                <td class="border-r border-black p-2">
                    <div class="font-bold truncate w-64">{{ item.produto }}</div>
                    <div class="text-[10px]">{{ item.sku }}</div>
                </td>
                <td class="border-r border-black p-2 text-center font-bold text-sm">{{ item.qtd_mover|floatformat:1 }}</td>
                <td class="border-r border-black p-2 text-center">{{ item.validade|date:"d/m/y" }}</td>
                <td class="p-2 text-center text-gray-300 border-black">[___]</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="grid grid-cols-2 gap-12 mt-12 pt-12">
        <div class="text-center">
            <div class="border-t border-black w-full mb-2"></div>
            <p class="text-xs uppercase font-bold">Operador de Empilhadeira</p>
        </div>
        <div class="text-center">
            <div class="border-t border-black w-full mb-2"></div>
            <p class="text-xs uppercase font-bold">Supervisor / Conferente</p>
        </div>
    </div>

    <div class="fixed top-4 right-4 no-print">
        <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-3 rounded shadow-lg font-bold hover:bg-blue-700 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
            </svg>
            IMPRIMIR / SALVAR PDF
        </button>
    </div>

</body>
</html>